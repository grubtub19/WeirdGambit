!function(e,r){for(var t in r)e[t]=r[t]}(exports,function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=7)}([function(e,r){e.exports=require("vscode")},function(e,r){e.exports=require("child_process")},function(e,r){e.exports=require("string_decoder")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(10);r.rgPath=n.rgPath},function(e,r,t){"use strict";var n=this&&this.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function n(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0});var i=t(1),a=t(11),s=t(5),u=t(2),c=t(0),p=t(3),l=t(6),h=p.rgPath.replace(/\bnode_modules\.asar\b/,"node_modules.asar.unpacked"),f=function(){function e(e){this.outputChannel=e,this.isDone=!1}return e.prototype.cancel=function(){this.isDone=!0,this.rgProc&&this.rgProc.kill(),this.ripgrepParser&&this.ripgrepParser.cancel()},e.prototype.provideTextSearchResults=function(e,r,t,n){var a=this;return this.outputChannel.appendLine("provideTextSearchResults "+e.pattern+", "+JSON.stringify(o({},r,{folder:r.folder.toString()}))),new Promise(function(o,s){n.onCancellationRequested(function(){return a.cancel()});var u=function(e,r){var t,n=["--hidden","--heading","--line-number","--color","ansi","--colors","path:none","--colors","line:none","--colors","match:fg:red","--colors","match:style:nobold"];n.push(e.isCaseSensitive?"--case-sensitive":"--ignore-case"),r.includes.map(l.anchorGlob).forEach(function(e){return n.push("-g",e)}),r.excludes.map(l.anchorGlob).forEach(function(e){return n.push("-g","!"+e)}),r.maxFileSize&&n.push("--max-filesize",r.maxFileSize+"");r.useIgnoreFiles?n.push("--no-ignore-parent"):n.push("--no-ignore");r.followSymlinks&&n.push("--follow");r.encoding&&n.push("--encoding",r.encoding);"--"===e.pattern&&(e.isRegExp=!0,e.pattern="\\-\\-");if(e.isWordMatch){var o=function(e,r,t){void 0===t&&(t={});if(!e)throw new Error("Cannot create regex from empty string");r||(e=function(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\[\]\(\)\#]/g,"\\$&")}(e));t.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e+="\\b"));var n="";t.global&&(n+="g");t.matchCase||(n+="i");t.multiline&&(n+="m");return new RegExp(e,n)}(e.pattern,e.isRegExp,{wholeWord:e.isWordMatch}),i=o.source.replace(/\\\//g,"/");n.push("--regexp",i)}else e.isRegExp?n.push("--regexp",function(e){return e.match(/([^\\]|^)(\\\\)*\$$/)?e.replace(/\$$/,"\\r?$"):e}(e.pattern)):(t=e.pattern,n.push("--fixed-strings"));n.push("--no-config"),n.push("--no-ignore-global"),n.push("--"),t&&n.push(t);return n.push("."),n}(e,r),c=r.folder.fsPath,p=u.map(function(e){return e.match(/^-/)?e:"'"+e+"'"}).join(" ");a.outputChannel.appendLine("rg "+p+"\n - cwd: "+c),a.rgProc=i.spawn(h,u,{cwd:c}),a.rgProc.on("error",function(e){console.error(e),a.outputChannel.append("Error: "+(e&&e.message)),s(e)});var f=!1;a.ripgrepParser=new g(r.maxResults,c,r.previewOptions),a.ripgrepParser.on("result",function(e){f=!0,t.report(e)});var v=!1;a.ripgrepParser.on("hitLimit",function(){v=!0,a.cancel()}),a.rgProc.stdout.on("data",function(e){a.ripgrepParser.handleData(e)});var m=!1;a.rgProc.stdout.once("data",function(){return m=!0});var _="";a.rgProc.stderr.on("data",function(e){var r=e.toString();a.outputChannel.append(r),_+=r}),a.rgProc.on("close",function(e){if(a.outputChannel.appendLine(m?"Got data from stdout":"No data from stdout"),a.outputChannel.appendLine(f?"Got result from parser":"No result from parser"),a.outputChannel.appendLine(""),a.isDone)o({limitHit:v});else{a.ripgrepParser.flush(),a.rgProc=null;var r=void 0;_&&!m&&(r=d(_))?s(new Error(r)):o({limitHit:v})}})})},e}();function d(e){var r=e.split("\n")[0].trim();return r.startsWith("Error parsing regex")?r:r.startsWith("error parsing glob")||r.startsWith("unsupported encoding")?r.charAt(0).toUpperCase()+r.substr(1):"Literal '\\n' not allowed."===r?"Literal '\\n' currently not supported":r.startsWith("Literal ")?r:void 0}r.RipgrepTextSearchEngine=f,r.rgErrorMsgForDisplay=d;var g=function(e){function r(r,t,n){var o=e.call(this)||this;return o.maxResults=r,o.rootFolder=t,o.previewOptions=n,o.numResults=0,o.stringDecoder=new u.StringDecoder,o}return n(r,e),r.prototype.cancel=function(){this.isDone=!0},r.prototype.flush=function(){this.handleDecodedData(this.stringDecoder.end())},r.prototype.handleData=function(e){var r="string"==typeof e?e:this.stringDecoder.write(e);this.handleDecodedData(r)},r.prototype.handleDecodedData=function(e){var t=(this.remainder?this.remainder+e:e).split(/\r\n|\n/);this.remainder=t[t.length-1]?t.pop():null;for(var n=0;n<t.length;n++){var o=t[n].trim();if(this.isDone)break;var i=void 0;if(i=o.match(r.RESULT_REGEX)){var a=parseInt(i[1])-1,s=i[2];i[3]&&(s+=r.MATCH_END_MARKER),this.handleMatchLine(o,a,s)}else(i=o.match(r.FILE_REGEX))&&(this.currentFile=i[1])}},r.prototype.handleMatchLine=function(e,t,n){var o=this;0===t&&(n=function(e){return function(e){return e&&e.length>0&&e.charCodeAt(0)===v}(e)?e.substr(1):e}(n));for(var i=0,a=-1,u=-1,p=0,h=!1,f=[],d=[],g=0;g<n.length-(r.MATCH_END_MARKER.length-1);)if(n.charCodeAt(g)===r.ESC_CODE)if(n.substr(g,r.MATCH_START_MARKER.length)===r.MATCH_START_MARKER){var m=n.slice(i,g);f.push(m),a=g+=r.MATCH_START_MARKER.length,u=p}else if(n.substr(g,r.MATCH_END_MARKER.length)===r.MATCH_END_MARKER){var _=n.slice(a,g);if(f.push(_),!h){var R=u,E=p;d.push(new c.Range(t,R,t,E))}a=-1,u=-1,i=g+=r.MATCH_END_MARKER.length,this.numResults++,this.numResults>=this.maxResults&&(h=!0)}else g++,p++;else g++,p++;var y=n.slice(i);f.push(y);var w=f.join(""),P=c.Uri.file(s.join(this.rootFolder,this.currentFile));d.map(function(e){return l.createTextSearchResult(P,w,e,o.previewOptions)}).forEach(function(e){return o.onResult(e)}),h&&(this.cancel(),this.emit("hitLimit"))},r.prototype.onResult=function(e){this.emit("result",e)},r.RESULT_REGEX=/^\u001b\[0m(\d+)\u001b\[0m:(.*)(\r?)/,r.FILE_REGEX=/^\u001b\[0m(.+)\u001b\[0m$/,r.ESC_CODE="".charCodeAt(0),r.MATCH_START_MARKER="[0m[31m",r.MATCH_END_MARKER="[0m",r}(a.EventEmitter);r.RipgrepParser=g;var v=65279;String.fromCharCode(v)},function(e,r){e.exports=require("path")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(5),o=t(0);r.fixDriveC=function(e){return"c:/"===n.parse(e).root.toLowerCase()?e.replace(/^c:[/\\]/i,"/"):e},r.anchorGlob=function(e){return e.startsWith("**")||e.startsWith("/")?e:"/"+e},r.createTextSearchResult=function(e,r,t,n){var i;if(n){var a=Math.floor(n.charsPerLine/5),s=Math.max(t.start.character-a,0),u=n.charsPerLine+s,c=Math.min(u,t.end.character-s);i={text:r.substring(s,u),match:new o.Range(0,t.start.character-s,0,c)}}else i={text:r,match:new o.Range(0,t.start.character,0,t.end.character)};return{uri:e,range:t,preview:i}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(0),o=t(8),i=t(4);r.activate=function(){if(n.workspace.getConfiguration("searchRipgrep").get("enable")){var e=n.window.createOutputChannel("search-rg"),r=new a(e);n.workspace.registerFileIndexProvider("file",r),n.workspace.registerTextSearchProvider("file",r)}};var a=function(){function e(e){var r=this;this.outputChannel=e,this.inProgress=new Set,process.once("exit",function(){return r.dispose()})}return e.prototype.provideTextSearchResults=function(e,r,t,n){var o=new i.RipgrepTextSearchEngine(this.outputChannel);return this.withEngine(o,function(){return o.provideTextSearchResults(e,r,t,n)})},e.prototype.provideFileIndex=function(e,r){var t=new o.RipgrepFileSearchEngine(this.outputChannel),i=[],a=function(r){i.push(n.Uri.file(e.folder.fsPath+"/"+r))};return this.withEngine(t,function(){return t.provideFileSearchResults(e,{report:a},r)}).then(function(){return i})},e.prototype.withEngine=function(e,r){var t=this;return this.inProgress.add(e),r().then(function(r){return t.inProgress.delete(e),r})},e.prototype.dispose=function(){this.inProgress.forEach(function(e){return e.cancel()})},e}()},function(e,r,t){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0});var o=t(1),i=t(2),a=t(9),s=t(3),u=t(4),c=t(6),p="darwin"===process.platform,l=s.rgPath.replace(/\bnode_modules\.asar\b/,"node_modules.asar.unpacked"),h=function(){function e(e){this.outputChannel=e}return e.prototype.cancel=function(){this.isDone=!0,this.rgProc&&this.rgProc.kill()},e.prototype.provideFileSearchResults=function(e,r,t){var i=this;return this.outputChannel.appendLine("provideFileSearchResults "+JSON.stringify(n({},e,{folder:e.folder.toString()}))),new Promise(function(n,s){t.onCancellationRequested(function(){return i.cancel()});var u=function(e){var r=["--files","--hidden","--case-sensitive"];e.includes.forEach(function(e){var t=c.anchorGlob(e);if(r.push("-g",t),p){var n=a.normalizeNFD(t);n!==t&&r.push("-g",n)}}),e.excludes.forEach(function(e){var t="!"+c.anchorGlob(e);if(r.push("-g",t),p){var n=a.normalizeNFD(t);n!==t&&r.push("-g",n)}}),e.useIgnoreFiles?r.push("--no-ignore-parent"):r.push("--no-ignore");e.followSymlinks&&r.push("--follow");return r.push("--no-config"),r.push("--no-ignore-global"),r.push("--"),r.push("."),r}(e),h=e.folder.fsPath,f=u.map(function(e){return e.match(/^-/)?e:"'"+e+"'"}).join(" ");i.outputChannel.appendLine("rg "+f+"\n - cwd: "+h+"\n"),i.rgProc=o.spawn(l,u,{cwd:h}),i.rgProc.on("error",function(e){console.log(e),s(e)});var d="";i.collectStdout(i.rgProc,function(e,t,o){if(e)s(e);else{var u=(d+(p?a.normalizeNFC(t):t)).split("\n");if(o){var c=u.length;u[c-1]=u[c-1].trim(),u[c-1]||u.pop()}else d=u.pop();u.length&&-1!==u[0].indexOf("\n")?s(new Error("Splitting up files failed")):(u.forEach(function(e){r.report(e)}),o&&(i.isDone?n():(i.rgProc=null,e?s(e):n())))}})})},e.prototype.collectStdout=function(e,r){var t,n=this,o=function(e,t,n){(e||n)&&(o=function(){}),r(e,t,n)},i=!1;e.stdout?(this.forwardData(e.stdout,o),e.stdout.once("data",function(){return i=!0})):this.outputChannel.appendLine("stdout is null"),e.stderr?t=this.collectData(e.stderr):this.outputChannel.appendLine("stderr is null"),e.on("error",function(e){o(e)}),e.on("close",function(e){var r,a;!i&&(r=n.decodeData(t))&&(a=u.rgErrorMsgForDisplay(r))?o(new Error("command failed with error code "+e+": "+a)):o(null,"",!0)})},e.prototype.forwardData=function(e,r){var t=new i.StringDecoder;return e.on("data",function(e){r(null,t.write(e))}),t},e.prototype.collectData=function(e){var r=[];return e.on("data",function(e){r.push(e)}),r},e.prototype.decodeData=function(e){var r=new i.StringDecoder;return e.map(function(e){return r.write(e)}).join("")},e}();r.RipgrepFileSearchEngine=h},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.canNormalize="function"==typeof"".normalize,r.normalizeNFC=function(e){return o(e,"NFC")},r.normalizeNFD=function(e){return o(e,"NFD")};var n=/[^\u0000-\u0080]/;function o(e,t){return r.canNormalize&&e?n.test(e)?e.normalize(t):e:e}},function(e,r){e.exports=require("vscode-ripgrep")},function(e,r){e.exports=require("events")}]));
//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/431ef9da3cf88a7e164f9d33bf62695e07c6c2a9/extensions/search-rg/dist/extension.js.map