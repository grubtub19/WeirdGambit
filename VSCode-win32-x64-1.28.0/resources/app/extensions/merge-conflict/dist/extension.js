!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t){e.exports=require("vscode")},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i,s,c,a=n(1),l=n(11),u=Object.prototype.toString;function d(e){return void 0!==e}function h(e){return"[object String]"===u.call(e)}function g(e){return JSON.parse(l.readFileSync(e,"utf8"))}function f(e,t){return c&&(e="［"+e.replace(/[aouei]/g,"$&$&")+"］"),0===t.length?e:e.replace(/\{(\d+)\}/g,function(e,n){var r=n[0],o=t[r],i=e;return"string"==typeof o?i=o:"number"!=typeof o&&"boolean"!=typeof o&&void 0!==o&&null!==o||(i=String(o)),i})}function m(e){return function(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return function(e){return"[object Number]"===u.call(e)}(t)?t>=e.length?void console.error("Broken localize call found. Index out of bounds. Stacktrace is\n: "+new Error("").stack):f(e[t],r):h(n)?(console.warn("Message "+n+" didn't get externalized correctly."),f(n,r)):void console.error("Broken localize call found. Stacktrace is\n: "+new Error("").stack)}}function p(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return f(t,n)}function v(e,t){return i[e]=t,t}function w(e,t){var n,r=a.join(s.cacheRoot,e.id+"-"+e.hash+".json"),o=!1,i=!1;try{return n=JSON.parse(l.readFileSync(r,{encoding:"utf8",flag:"r"})),function(e){var t=new Date;l.utimes(e,t,t,function(){})}(r),n}catch(e){if("ENOENT"===e.code)i=!0;else{if(!(e instanceof SyntaxError))throw e;console.log("Syntax error parsing message bundle: "+e.message+"."),l.unlink(r,function(e){e&&console.error("Deleting corrupted bundle "+r+" failed.")}),o=!0}}if(!(n=function(e,t){var n=s.translationsConfig[e.id];if(n){var r=g(n).contents,o=g(a.join(t,"nls.metadata.json")),i=Object.create(null);for(var c in o){var l=o[c],u=r[e.outDir+"/"+c];if(u){for(var d=[],f=0;f<l.keys.length;f++){var m=l.keys[f],p=u[h(m)?m:m.key];void 0===p&&(p=l.messages[f]),d.push(p)}i[c]=d}else i[c]=l.messages}return i}}(e,t))||o)return n;if(i)try{l.writeFileSync(r,JSON.stringify(n),{encoding:"utf8",flag:"wx"})}catch(e){if("EEXIST"===e.code)return n;throw e}return n}function y(e){try{return function(e){var t=g(a.join(e,"nls.metadata.json")),n=Object.create(null);for(var r in t){var o=t[r];n[r]=o.messages}return n}(e)}catch(e){return void console.log("Generating default bundle from meta data failed.",e)}}function C(e,t){var n;if(!0===s.languagePackSupport&&void 0!==s.cacheRoot&&void 0!==s.languagePackId&&void 0!==s.translationsConfigFile&&void 0!==s.translationsConfig)try{n=w(e,t)}catch(e){console.log("Load or create bundle failed ",e)}if(!n){if(s.languagePackSupport)return y(t);var r=function(e){for(var t=s.locale;t;){var n=a.join(e,"nls.bundle."+t+".json");if(l.existsSync(n))return n;var r=t.lastIndexOf("-");t=r>0?t.substring(0,r):void 0}if(void 0===t&&(n=a.join(e,"nls.bundle.json"),l.existsSync(n)))return n}(t);if(r)try{return g(r)}catch(e){console.log("Loading in the box message bundle failed.",e)}n=y(t)}return n}function b(e){if(!e)return p;var t=a.extname(e);if(t&&(e=e.substr(0,e.length-t.length)),s.messageFormat===r.both||s.messageFormat===r.bundle){var n=function(e){for(var t,n=a.dirname(e);t=a.join(n,"nls.metadata.header.json"),!l.existsSync(t);){var r=a.dirname(n);if(r===n){t=void 0;break}n=r}return t}(e);if(n){var o=a.dirname(n),u=i[o];if(void 0===u)try{var h=JSON.parse(l.readFileSync(n,"utf8"));try{var f=C(h,o);u=v(o,f?{header:h,nlsBundle:f}:null)}catch(e){console.error("Failed to load nls bundle",e),u=v(o,null)}}catch(e){console.error("Failed to read header file",e),u=v(o,null)}if(u){var w=e.substr(o.length+1).replace(/\\/g,"/"),y=u.nlsBundle[w];return void 0===y?(console.error("Messages for file "+e+" not found. See console for details."),function(){return"Messages not found."}):m(y)}}}if(s.messageFormat===r.both||s.messageFormat===r.file)try{var b=g(function(e){var t;if(s.cacheLanguageResolution&&t)t=t;else{if(c||!s.locale)t=".nls.json";else for(var n=s.locale;n;){var r=".nls."+n+".json";if(l.existsSync(e+r)){t=r;break}var o=n.lastIndexOf("-");o>0?n=n.substring(0,o):(t=".nls.json",n=null)}s.cacheLanguageResolution&&(t=t)}return e+t}(e));return Array.isArray(b)?m(b):d(b.messages)&&d(b.keys)?m(b.messages):(console.error("String bundle '"+e+"' uses an unsupported format."),function(){return"File bundle has unsupported format. See console for details"})}catch(e){"ENOENT"!==e.code&&console.error("Failed to load single file bundle",e)}return console.error("Failed to load message bundle for file "+e),function(){return"Failed to load message bundle. See console for details."}}!function(e){e.file="file",e.bundle="bundle",e.both="both"}(r=t.MessageFormat||(t.MessageFormat={})),function(e){e.is=function(e){var t=e;return t&&d(t.key)&&d(t.comment)}}(o||(o={})),function(){if(s={locale:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:r.bundle},h(process.env.VSCODE_NLS_CONFIG))try{var e=JSON.parse(process.env.VSCODE_NLS_CONFIG);if(h(e.locale)&&(s.locale=e.locale.toLowerCase()),function(e){return!0===e||!1===e}(e._languagePackSupport)&&(s.languagePackSupport=e._languagePackSupport),h(e._cacheRoot)&&(s.cacheRoot=e._cacheRoot),h(e._languagePackId)&&(s.languagePackId=e._languagePackId),h(e._translationsConfigFile)){s.translationsConfigFile=e._translationsConfigFile;try{s.translationsConfig=g(s.translationsConfigFile)}catch(t){e._corruptedFile&&l.writeFile(e._corruptedFile,"corrupted","utf8",function(e){console.error(e)})}}}catch(e){}c="pseudo"===s.locale,void 0,i=Object.create(null)}(),t.loadMessageBundle=b,t.config=function(e){return e&&(h(e.locale)&&(s.locale=e.locale.toLowerCase(),void 0,i=Object.create(null)),void 0!==e.messageFormat&&(s.messageFormat=e.messageFormat)),c="pseudo"===s.locale,b}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,c)}a((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0);class i{constructor(e){this.context=e}begin(){this.context.subscriptions.push(o.workspace.registerTextDocumentContentProvider(i.scheme,this))}dispose(){}provideTextDocumentContent(e){return r(this,void 0,void 0,function*(){try{const{scheme:t,range:n}=JSON.parse(e.query),[r,i]=n;return(yield o.workspace.openTextDocument(e.with({scheme:t,query:""}))).getText(new o.Range(r.line,r.character,i.line,i.character))}catch(e){return yield o.window.showErrorMessage("Unable to show comparison"),null}})}}i.scheme="merge-conflict.conflict-diff",t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5);t.activate=function(e){const t=new r.default(e);t.begin(),e.subscriptions.push(t)},t.deactivate=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(6),i=n(10),s=n(12),c=n(3),a=n(13),l="merge-conflict";t.default=class{constructor(e){this.context=e,this.services=[]}begin(){let e=this.createExtensionConfiguration();const t=new o.default;this.services.push(t,new s.default(t),new i.default(t),new c.default(this.context),new a.default(this.context,t)),this.services.forEach(t=>{t.begin&&t.begin instanceof Function&&t.begin(e)}),r.workspace.onDidChangeConfiguration(()=>{this.services.forEach(e=>{e.configurationUpdated&&e.configurationUpdated instanceof Function&&e.configurationUpdated(this.createExtensionConfiguration())})})}createExtensionConfiguration(){const e=r.workspace.getConfiguration(l),t=e.get("codeLens.enabled",!0),n=e.get("decorators.enabled",!0);return{enableCodeLens:t,enableDecorations:n,enableEditorOverview:n}}dispose(){this.services.forEach(e=>e.dispose()),this.services=[]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),o=n(9);class i{constructor(e,t){this.origins=new Set,this.origins.add(t),this.delayTask=new o.Delayer(e)}addOrigin(e){return this.origins.has(e),!1}hasOrigin(e){return this.origins.has(e)}}class s{constructor(e,t){this.parent=e,this.origin=t}getConflicts(e){return this.parent.getConflicts(e,this.origin)}isPending(e){return this.parent.isPending(e,this.origin)}forget(e){this.parent.forget(e)}}t.default=class{constructor(){this.cache=new Map,this.delayExpireTime=250}getConflicts(e,t){let n=this.getCacheKey(e);if(!n)return Promise.resolve(this.getConflictsOrEmpty(e,[t]));let r=this.cache.get(n);return r?r.addOrigin(t):(r=new i(this.delayExpireTime,t),this.cache.set(n,r)),r.delayTask.trigger(()=>{let t=this.getConflictsOrEmpty(e,Array.from(r.origins));return this.cache&&this.cache.delete(n),t})}isPending(e,t){if(!e)return!1;let n=this.getCacheKey(e);if(!n)return!1;var r=this.cache.get(n);return!!r&&r.hasOrigin(t)}createTracker(e){return new s(this,e)}forget(e){let t=this.getCacheKey(e);t&&this.cache.delete(t)}dispose(){this.cache.clear()}getConflictsOrEmpty(e,t){return r.MergeConflictParser.containsConflict(e)?r.MergeConflictParser.scanDocument(e):[]}getCacheKey(e){return e.uri&&e.uri?e.uri.toString():null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(8),i="<<<<<<<",s="|||||||",c="=======",a=">>>>>>>";class l{static scanDocument(e){let t=null;const n=[];for(let r=0;r<e.lineCount;r++){const o=e.lineAt(r);if(o&&!o.isEmptyOrWhitespace)if(o.text.startsWith(i)){if(null!==t){t=null;break}t={startHeader:o,commonAncestors:[]}}else if(t&&!t.splitter&&o.text.startsWith(s))t.commonAncestors.push(o);else if(t&&!t.splitter&&o.text.startsWith(c))t.splitter=o;else if(t&&o.text.startsWith(a)){t.endFooter=o;let r=l.scanItemTolMergeConflictDescriptor(e,t);null!==r&&n.push(r),t=null}}return n.filter(Boolean).map(e=>new o.DocumentMergeConflict(e))}static scanItemTolMergeConflictDescriptor(e,t){if(!t.startHeader||!t.splitter||!t.endFooter)return null;let n=t.commonAncestors[0]||t.splitter;return{current:{header:t.startHeader.range,decoratorContent:new r.Range(t.startHeader.rangeIncludingLineBreak.end,l.shiftBackOneCharacter(e,n.range.start,t.startHeader.rangeIncludingLineBreak.end)),content:new r.Range(t.startHeader.rangeIncludingLineBreak.end,n.range.start),name:t.startHeader.text.substring(i.length+1)},commonAncestors:t.commonAncestors.map((n,o,i)=>{let c=i[o+1]||t.splitter;return{header:n.range,decoratorContent:new r.Range(n.rangeIncludingLineBreak.end,l.shiftBackOneCharacter(e,c.range.start,n.rangeIncludingLineBreak.end)),content:new r.Range(n.rangeIncludingLineBreak.end,c.range.start),name:n.text.substring(s.length+1)}}),splitter:t.splitter.range,incoming:{header:t.endFooter.range,decoratorContent:new r.Range(t.splitter.rangeIncludingLineBreak.end,l.shiftBackOneCharacter(e,t.endFooter.range.start,t.splitter.rangeIncludingLineBreak.end)),content:new r.Range(t.splitter.rangeIncludingLineBreak.end,t.endFooter.range.start),name:t.endFooter.text.substring(a.length+1)},range:new r.Range(t.startHeader.range.start,t.endFooter.rangeIncludingLineBreak.end)}}static containsConflict(e){if(!e)return!1;let t=e.getText();return t.includes(i)&&t.includes(a)}static shiftBackOneCharacter(e,t,n){if(t.isEqual(n))return t;let o=t.line,i=t.character-1;return i<0&&(o--,i=e.lineAt(o).range.end.character),new r.Position(o,i)}}t.MergeConflictParser=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DocumentMergeConflict=class{constructor(e){this.range=e.range,this.current=e.current,this.incoming=e.incoming,this.commonAncestors=e.commonAncestors,this.splitter=e.splitter}commitEdit(e,t,n){return n?(this.applyEdit(e,t,n),Promise.resolve(!0)):t.edit(n=>this.applyEdit(e,t,n))}applyEdit(e,t,n){if(0===e){let e=t.document.getText(this.current.content);this.replaceRangeWithContent(e,n)}else if(1===e){let e=t.document.getText(this.incoming.content);this.replaceRangeWithContent(e,n)}else if(2===e){const e=t.document.getText(this.current.content),r=t.document.getText(this.incoming.content);n.replace(this.range,e.concat(r))}}replaceRangeWithContent(e,t){this.isNewlineOnly(e)?t.replace(this.range,""):t.replace(this.range,e)}isNewlineOnly(e){return"\n"===e||"\r\n"===e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Delayer=class{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.onSuccess=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(e=>{this.onSuccess=e}).then(()=>{this.completionPromise=null,this.onSuccess=null;var e=this.task();return this.task=null,e})),(t>=0||null===this.timeout)&&(this.timeout=setTimeout(()=>{this.timeout=null,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return null;this.cancelTimeout();let e=this.completionPromise;return this.onSuccess(void 0),e}isTriggered(){return null!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise=null}cancelTimeout(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,c)}a((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),i=n(2).loadMessageBundle(n(1).join(__dirname,"codelensProvider.ts"));t.default=class{constructor(e){this.tracker=e.createTracker("codelens")}begin(e){this.config=e,this.config.enableCodeLens&&this.registerCodeLensProvider()}configurationUpdated(e){!1===e.enableCodeLens&&this.codeLensRegistrationHandle?(this.codeLensRegistrationHandle.dispose(),this.codeLensRegistrationHandle=null):!0!==e.enableCodeLens||this.codeLensRegistrationHandle||this.registerCodeLensProvider(),this.config=e}dispose(){this.codeLensRegistrationHandle&&(this.codeLensRegistrationHandle.dispose(),this.codeLensRegistrationHandle=null)}provideCodeLenses(e,t){return r(this,void 0,void 0,function*(){if(!this.config||!this.config.enableCodeLens)return null;let t=yield this.tracker.getConflicts(e);if(!t||0===t.length)return null;let n=[];return t.forEach(e=>{let t={command:"merge-conflict.accept.current",title:i(0,null),arguments:["known-conflict",e]},r={command:"merge-conflict.accept.incoming",title:i(1,null),arguments:["known-conflict",e]},s={command:"merge-conflict.accept.both",title:i(2,null),arguments:["known-conflict",e]},c={command:"merge-conflict.compare",title:i(3,null),arguments:[e]};n.push(new o.CodeLens(e.range,t),new o.CodeLens(e.range.with(e.range.start.with({character:e.range.start.character+1})),r),new o.CodeLens(e.range.with(e.range.start.with({character:e.range.start.character+2})),s),new o.CodeLens(e.range.with(e.range.start.with({character:e.range.start.character+3})),c))}),n})}registerCodeLensProvider(){this.codeLensRegistrationHandle=o.languages.registerCodeLensProvider([{scheme:"file"},{scheme:"untitled"}],this)}}},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,c)}a((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),i=n(3),s=n(1),c=n(2).loadMessageBundle(n(1).join(__dirname,"commandHandler.ts"));var a;!function(e){e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards"}(a||(a={}));t.default=class{constructor(e){this.disposables=[],this.tracker=e.createTracker("commands")}begin(){this.disposables.push(this.registerTextEditorCommand("merge-conflict.accept.current",this.acceptCurrent),this.registerTextEditorCommand("merge-conflict.accept.incoming",this.acceptIncoming),this.registerTextEditorCommand("merge-conflict.accept.selection",this.acceptSelection),this.registerTextEditorCommand("merge-conflict.accept.both",this.acceptBoth),this.registerTextEditorCommand("merge-conflict.accept.all-current",this.acceptAllCurrent),this.registerTextEditorCommand("merge-conflict.accept.all-incoming",this.acceptAllIncoming),this.registerTextEditorCommand("merge-conflict.accept.all-both",this.acceptAllBoth),this.registerTextEditorCommand("merge-conflict.next",this.navigateNext),this.registerTextEditorCommand("merge-conflict.previous",this.navigatePrevious),this.registerTextEditorCommand("merge-conflict.compare",this.compare))}registerTextEditorCommand(e,t){return o.commands.registerCommand(e,(...e)=>{const n=o.window.activeTextEditor;return n&&t.call(this,n,...e)})}acceptCurrent(e,...t){return this.accept(0,e,...t)}acceptIncoming(e,...t){return this.accept(1,e,...t)}acceptBoth(e,...t){return this.accept(2,e,...t)}acceptAllCurrent(e){return this.acceptAll(0,e)}acceptAllIncoming(e){return this.acceptAll(1,e)}acceptAllBoth(e){return this.acceptAll(2,e)}compare(e,t){return r(this,void 0,void 0,function*(){const n=s.basename(e.document.uri.fsPath);if(!t&&!(t=yield this.findConflictContainingSelection(e)))return void o.window.showWarningMessage(c(0,null));const r=e.document.uri.scheme;let a=t.current.content;const l=e.document.uri.with({scheme:i.default.scheme,query:JSON.stringify({scheme:r,range:a})});a=t.incoming.content;const u=l.with({query:JSON.stringify({scheme:r,range:a})}),d=c(1,null,n);o.commands.executeCommand("vscode.diff",l,u,d)})}navigateNext(e){return this.navigate(e,a.Forwards)}navigatePrevious(e){return this.navigate(e,a.Backwards)}acceptSelection(e){return r(this,void 0,void 0,function*(){let t,n=yield this.findConflictContainingSelection(e);if(!n)return void o.window.showWarningMessage(c(2,null));let r=n.splitter;if(n.commonAncestors.length>0&&(r=n.commonAncestors[0].header),e.selection.active.isBefore(r.start))t=0;else{if(!e.selection.active.isAfter(n.splitter.end))return e.selection.active.isBefore(n.splitter.start)?void o.window.showWarningMessage(c(3,null)):void o.window.showWarningMessage(c(4,null));t=1}this.tracker.forget(e.document),n.commitEdit(t,e)})}dispose(){this.disposables.forEach(e=>e.dispose()),this.disposables=[]}navigate(e,t){return r(this,void 0,void 0,function*(){let n=yield this.findConflictForNavigation(e,t);n?n.canNavigate?n.conflict&&(e.selection=new o.Selection(n.conflict.range.start,n.conflict.range.start),e.revealRange(n.conflict.range,o.TextEditorRevealType.Default)):o.window.showWarningMessage(c(6,null)):o.window.showWarningMessage(c(5,null))})}accept(e,t,...n){return r(this,void 0,void 0,function*(){let r;(r="known-conflict"===n[0]?n[1]:yield this.findConflictContainingSelection(t))?(this.tracker.forget(t.document),r.commitEdit(e,t)):o.window.showWarningMessage(c(7,null))})}acceptAll(e,t){return r(this,void 0,void 0,function*(){let n=yield this.tracker.getConflicts(t.document);n&&0!==n.length?(this.tracker.forget(t.document),yield t.edit(r=>n.forEach(n=>{n.applyEdit(e,t,r)}))):o.window.showWarningMessage(c(8,null))})}findConflictContainingSelection(e,t){return r(this,void 0,void 0,function*(){if(t||(t=yield this.tracker.getConflicts(e.document)),!t||0===t.length)return null;for(let n=0;n<t.length;n++)if(t[n].range.contains(e.selection.active))return t[n];return null})}findConflictForNavigation(e,t,n){return r(this,void 0,void 0,function*(){if(n||(n=yield this.tracker.getConflicts(e.document)),!n||0===n.length)return null;let r,o,i=e.selection.active;if(1===n.length)return n[0].range.contains(i)?{canNavigate:!1}:{canNavigate:!0,conflict:n[0]};if(t===a.Forwards)r=(e=>i.isBefore(e.range.start)),o=(()=>n[0]);else{if(t!==a.Backwards)throw new Error(`Unsupported direction ${t}`);r=(e=>i.isAfter(e.range.start)),o=(()=>n[n.length-1])}for(let e=0;e<n.length;e++)if(r(n[e])&&!n[e].range.contains(i))return{canNavigate:!0,conflict:n[e]};return{canNavigate:!0,conflict:o()}})}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,c)}a((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),i=n(2).loadMessageBundle(n(1).join(__dirname,"mergeDecorator.ts"));t.default=class{constructor(e,t){this.context=e,this.decorations={},this.decorationUsesWholeLine=!0,this.updating=new Map,this.tracker=t.createTracker("decorator")}begin(e){this.config=e,this.registerDecorationTypes(e),o.window.visibleTextEditors.forEach(e=>this.applyDecorations(e)),o.workspace.onDidOpenTextDocument(e=>{this.applyDecorationsFromEvent(e)},null,this.context.subscriptions),o.workspace.onDidChangeTextDocument(e=>{this.applyDecorationsFromEvent(e.document)},null,this.context.subscriptions),o.window.onDidChangeVisibleTextEditors(e=>{e.forEach(e=>this.applyDecorations(e))},null,this.context.subscriptions)}configurationUpdated(e){this.config=e,this.registerDecorationTypes(e),o.window.visibleTextEditors.forEach(e=>{this.removeDecorations(e),this.applyDecorations(e)})}registerDecorationTypes(e){Object.keys(this.decorations).forEach(e=>this.decorations[e].dispose()),this.decorations={},e.enableDecorations&&e.enableEditorOverview&&((e.enableDecorations||e.enableEditorOverview)&&(this.decorations["current.content"]=o.window.createTextEditorDecorationType(this.generateBlockRenderOptions("merge.currentContentBackground","editorOverviewRuler.currentContentForeground",e)),this.decorations["incoming.content"]=o.window.createTextEditorDecorationType(this.generateBlockRenderOptions("merge.incomingContentBackground","editorOverviewRuler.incomingContentForeground",e)),this.decorations["commonAncestors.content"]=o.window.createTextEditorDecorationType(this.generateBlockRenderOptions("merge.commonContentBackground","editorOverviewRuler.commonContentForeground",e))),e.enableDecorations&&(this.decorations["current.header"]=o.window.createTextEditorDecorationType({isWholeLine:this.decorationUsesWholeLine,backgroundColor:new o.ThemeColor("merge.currentHeaderBackground"),color:new o.ThemeColor("editor.foreground"),outlineStyle:"solid",outlineWidth:"1pt",outlineColor:new o.ThemeColor("merge.border"),after:{contentText:" "+i(0,null),color:new o.ThemeColor("descriptionForeground")}}),this.decorations["commonAncestors.header"]=o.window.createTextEditorDecorationType({isWholeLine:this.decorationUsesWholeLine,backgroundColor:new o.ThemeColor("merge.commonHeaderBackground"),color:new o.ThemeColor("editor.foreground"),outlineStyle:"solid",outlineWidth:"1pt",outlineColor:new o.ThemeColor("merge.border")}),this.decorations.splitter=o.window.createTextEditorDecorationType({color:new o.ThemeColor("editor.foreground"),outlineStyle:"solid",outlineWidth:"1pt",outlineColor:new o.ThemeColor("merge.border"),isWholeLine:this.decorationUsesWholeLine}),this.decorations["incoming.header"]=o.window.createTextEditorDecorationType({backgroundColor:new o.ThemeColor("merge.incomingHeaderBackground"),color:new o.ThemeColor("editor.foreground"),outlineStyle:"solid",outlineWidth:"1pt",outlineColor:new o.ThemeColor("merge.border"),isWholeLine:this.decorationUsesWholeLine,after:{contentText:" "+i(1,null),color:new o.ThemeColor("descriptionForeground")}})))}dispose(){Object.keys(this.decorations).forEach(e=>{this.decorations[e].dispose()}),this.decorations={}}generateBlockRenderOptions(e,t,n){let r={};return n.enableDecorations&&(r.backgroundColor=new o.ThemeColor(e),r.isWholeLine=this.decorationUsesWholeLine),n.enableEditorOverview&&(r.overviewRulerColor=new o.ThemeColor(t),r.overviewRulerLane=o.OverviewRulerLane.Full),r}applyDecorationsFromEvent(e){for(var t=0;t<o.window.visibleTextEditors.length;t++)o.window.visibleTextEditors[t].document===e&&this.applyDecorations(o.window.visibleTextEditors[t])}applyDecorations(e){return r(this,void 0,void 0,function*(){if(e&&e.document&&this.config&&(this.config.enableDecorations||this.config.enableEditorOverview)&&!this.updating.get(e))try{this.updating.set(e,!0);let t=yield this.tracker.getConflicts(e.document);if(-1===o.window.visibleTextEditors.indexOf(e))return;if(0===t.length)return void this.removeDecorations(e);let n={},r=(e,t)=>{n[e]=n[e]||[],n[e].push(t)};t.forEach(e=>{e.current.decoratorContent.isEmpty||r("current.content",e.current.decoratorContent),e.incoming.decoratorContent.isEmpty||r("incoming.content",e.incoming.decoratorContent),e.commonAncestors.forEach(e=>{e.decoratorContent.isEmpty||r("commonAncestors.content",e.decoratorContent)}),this.config.enableDecorations&&(r("current.header",e.current.header),r("splitter",e.splitter),r("incoming.header",e.incoming.header),e.commonAncestors.forEach(e=>{r("commonAncestors.header",e.header)}))}),Object.keys(n).forEach(t=>{let r=this.decorations[t];r&&e.setDecorations(r,n[t])})}finally{this.updating.delete(e)}})}removeDecorations(e){Object.keys(this.decorations).forEach(t=>{let n=this.decorations[t];n&&e.setDecorations(n,[])})}}}]));
//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/431ef9da3cf88a7e164f9d33bf62695e07c6c2a9/extensions/merge-conflict/dist/extension.js.map